<div class="bg-dark header" data-bs-theme="dark">
  <div class="categories">
    <label style="color: grey">Categorías</label>
    <select id="category" [formControl]="formControlCategory">
      <option
        *ngFor="let category of categoryList"
        [value]="category"
        routerLinkActive="router-link-active"
      >
        {{ category }}
      </option>
    </select>
  </div>

  <div class="buttons-gap">
    <button
      href=""
      (click)="formControlCategory.setValue('Aire Acondicionado')"
      type="button"
      class="button-products"
    >
      <div class="inner-button">
        <p>Aires</p>
      </div>
    </button>
    <button
      href=""
      (click)="formControlCategory.setValue('Celulares')"
      class="button-products"
      type="button"
    >
      <div class="inner-button">
        <p>Celulares</p>
      </div>
    </button>
    <button
      href=""
      (click)="formControlCategory.setValue('Heladeras')"
      type="button"
      class="button-products"
    >
      <div class="inner-button">
        <p>Heladeras</p>
      </div>
    </button>
    <button
      href=""
      (click)="formControlCategory.setValue('Impresoras')"
      type="button"
      class="button-products"
    >
      <div class="inner-button">
        <p>Impresoras</p>
      </div>
    </button>
    <button
      href=""
      (click)="formControlCategory.setValue('Lavarropas')"
      class="button-products"
      type="button"
    >
      <div class="inner-button">
        <p>Lavarropas</p>
      </div>
    </button>
    <button
      href=""
      (click)="formControlCategory.setValue('Notebooks')"
      type="button"
      class="button-products"
    >
      <div class="inner-button">
        <p>Notebooks</p>
      </div>
    </button>
    <button
      href=""
      (click)="formControlCategory.setValue('Microondas')"
      type="button"
      class="button-products"
    >
      <div class="inner-button">
        <p>Microondas</p>
      </div>
    </button>
    <button
      href=""
      (click)="formControlCategory.setValue('Televisores')"
      type="button"
      class="button-products"
    >
      <div class="inner-button">
        <p>Televisores</p>
      </div>
    </button>
  </div>
</div>

<form action="" [formGroup]="formGrupSubfilters">
  <div style="display: flex; justify-content: flex-start">
    <aside *ngIf="productListFilteredByCategory.length != 0" class="aside">
      <div *ngIf="productListFilteredByCategory.length != 0">
        <div class="filters">
          <p>Marca</p>
          <select id="brand" formControlName="brand">
            <option *ngFor="let brand of brandList" [value]="brand">
              {{ brand }}
            </option>
          </select>
          <div class="precio">
            <div class="inner-precio">
              <input type="radio" formControlName="orderByPrice" value="asc" />
              <label for="asc">Precio Menor a mayor</label>
            </div>
            <div class="inner-precio">
              <input type="radio" formControlName="orderByPrice" value="desc" />
              <label for="desc">Precio Mayor a menor</label>
            </div>
          </div>
        </div>

        <div
          class="filters"
          *ngIf="formControlCategory.value == 'Aire Acondicionado'"
        >
          <p>Frio / Calor</p>
          <select id="heatCold" formControlName="heatCold">
            <option *ngFor="let type of heatColdList" [value]="type">
              {{ type }}
            </option>
          </select>
          <p>Tipo</p>
          <select id="airTypes" formControlName="airTypes">
            <option *ngFor="let type of airTypesList" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Ventiladores" -->
        <div
          class="filters"
          *ngIf="formControlCategory.value == 'Ventiladores'"
        >
          <p>Tipo</p>
          <select id="fanType" formControlName="fanType">
            <option *ngFor="let type of fanTypeList" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Televisores" -->
        <div
          class="filters"
          *ngIf="formControlCategory.value === 'Televisores'"
        >
          <p>Tecnología</p>
          <select id="tvTecnology" formControlName="tvTecnology">
            <option *ngFor="let type of tvTechnologiesList" [value]="type">
              {{ type }}
            </option>
          </select>
          <p>Tamaño pantalla</p>
          <select id="tvInches" formControlName="tvInches">
            <option *ngFor="let type of tvInchesList" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Auriculares" -->
        <div
          class="filters"
          *ngIf="formControlCategory.value === 'Auriculares'"
        >
          <p>Tipo</p>
          <select id="headphoneType" formControlName="headphoneType">
            <option *ngFor="let type of headphonesTypeList" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Heladeras" -->
        <div class="filters" *ngIf="formControlCategory.value === 'Heladeras'">
          <p>Sist. enfriamiento</p>
          <select
            id="refrigeratorCoolingSystem"
            formControlName="refrigeratorCoolingSystem"
          >
            <option
              *ngFor="let type of refrigeratorCoolingSystemList"
              [value]="type"
            >
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Lavarropas" -->
        <div class="filters" *ngIf="formControlCategory.value === 'Lavarropas'">
          <p>Tipo</p>
          <select id="washingCapacity" formControlName="washingCapacity">
            <option *ngFor="let type of washingCapacityList" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Microondas" -->
        <div class="filters" *ngIf="formControlCategory.value === 'Microondas'">
          <p>Capacidad</p>
          <select id="microwaveCapacity" formControlName="microwaveCapacity">
            <option *ngFor="let type of microwaveCapacityList" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Celulares" -->
        <div class="filters" *ngIf="formControlCategory.value === 'Celulares'">
          <p>Tamaño pantalla</p>
          <select id="smartphoneInches" formControlName="smartphoneInches">
            <option *ngFor="let type of smartphoneInchesList" [value]="type">
              {{ type }}
            </option>
          </select>
          <p>RAM</p>
          <select id="smartphoneRam" formControlName="smartphoneRam">
            <option *ngFor="let type of smartphoneRamList" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Notebooks" -->
        <div class="filters" *ngIf="formControlCategory.value === 'Notebooks'">
          <p>Tamaño pantalla</p>
          <select id="notebookScreenSize" formControlName="notebookScreenSize">
            <option *ngFor="let type of notebookScreenSizesList" [value]="type">
              {{ type }}
            </option>
          </select>
          <p>RAM</p>
          <select id="notebookRam" formControlName="notebookRam">
            <option *ngFor="let type of notebookRamList" [value]="type">
              {{ type }}
            </option>
          </select>
          <p>Procesador</p>
          <select id="notebookProcessor" formControlName="notebookProcessor">
            <option *ngFor="let type of notebookProcessorsList" [value]="type">
              {{ type }}
            </option>
          </select>
          <p>Tamaño almacenamiento</p>
          <select
            id="notebookStorageSize"
            formControlName="notebookStorageSize"
          >
            <option
              *ngFor="let type of notebookStorageSizesList"
              [value]="type"
            >
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Tablets" -->
        <div class="filters" *ngIf="formControlCategory.value === 'Tablets'">
          <p>Tamaño pantalla</p>
          <select id="tabletScreenSize" formControlName="tabletScreenSize">
            <option *ngFor="let type of tabletScreenSizesList" [value]="type">
              {{ type }}
            </option>
          </select>
          <p>RAM</p>
          <select id="tabletRam" formControlName="tabletRam">
            <option *ngFor="let type of tabletRamList" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Impresoras" -->
        <div class="filters" *ngIf="formControlCategory.value === 'Impresoras'">
          <p>Monocromatica</p>
          <select id="printerType" formControlName="printerType">
            <option *ngFor="let type of printerTypeList" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Teclados" -->
        <div class="filters" *ngIf="formControlCategory.value === 'Teclados'">
          <p>Conectividad</p>
          <select
            id="keyboardConnectivityType"
            formControlName="keyboardConnectivityType"
          >
            <option
              *ngFor="let type of keyboardConnectivityTypeList"
              [value]="type"
            >
              {{ type }}
            </option>
          </select>
        </div>

        <!-- Condición para "Mouses" -->
        <div class="filters" *ngIf="formControlCategory.value === 'Mouses'">
          <p>Conectividad</p>
          <select
            id="mouseConnectivityType"
            formControlName="mouseConnectivityType"
          >
            <option
              *ngFor="let type of mouseConnectivityTypeList"
              [value]="type"
            >
              {{ type }}
            </option>
          </select>
        </div>
      </div>
    </aside>

    <div *ngIf="productListSubFiltered.length > 0; else noProducts">
      <div class="cards">
        <div *ngFor="let product of productListSubFiltered | paginate: { itemsPerPage: 8, currentPage: currentPage }">
          <div [routerLink]="['/productDetails', product.id]" class="card">
            <img
              src="{{ product.urlImage }}"
              alt="Imagen {{ product.model }}"
              class="card-img-top"
            />
            <div class="card-text">
              <p class="marca">{{ product.brand }}</p>
              <p>
                {{ product.category }} {{ product.brand }} {{ product.model }}
              </p>
              <p>Precio: ${{ product.price | number: '1.0-0' }}</p>
    
              <div class="controls" [hidden]="!isLoggedIN()">
                <button
                  class="add-cart"
                  type="button"
                  (click)="decreaseQuantity(product.id); $event.stopPropagation()"
                >
                  -
                </button>
    
                <button
                  class="add-cart"
                  type="button"
                  (click)="addToCart(product); $event.stopPropagation()"
                >
                  +
                </button>
              </div>
                <button
                class="add-cart"
                type="button"
                [routerLink]="['/productDetails', product.id]"
              >
                Ver detalle
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="my-pagination">
        <pagination-controls
          (pageChange)="onPageChange($event)"
          [autoHide]="false"
        ></pagination-controls>
      </div>
    </div>
    
      <ng-template #noProducts>
        <div class="no-products">
          <div class="alert alert-info" role="alert">
            SIN PRODUCTOS
          </div>
        </div>
      </ng-template>
      
  </div>
</form>
